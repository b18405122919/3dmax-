# Spine动画导入工具 v2.0

这是一个用于将Spine动画数据导入到3ds Max的Python工具。该工具支持导入骨骼、纹理、网格和动画数据。

## 功能特性

- ✅ **骨骼导入**: 自动创建骨骼层次结构
- ✅ **纹理加载**: 从Atlas文件加载纹理并应用材质
- ✅ **网格创建**: 根据槽位数据创建网格对象
- ✅ **动画导入**: 导入位置和旋转关键帧动画
- ✅ **用户界面**: 友好的图形用户界面
- ✅ **错误处理**: 完善的错误处理和调试信息
- ✅ **中文支持**: 完全中文化的界面和提示

## 系统要求

- 3ds Max 2018或更高版本
- Python 3.x
- pymxs模块

## 安装说明

1. 将`spine_importer_improved.py`文件复制到3ds Max的脚本目录
2. 在3ds Max中运行脚本：
   ```python
   execfile("spine_importer_improved.py")
   ```

## 使用方法

### 1. 准备文件
确保你有以下Spine导出文件：
- **JSON文件**: 包含骨骼、槽位和动画数据
- **Atlas文件**: 包含纹理信息
- **纹理目录**: 包含所有PNG纹理文件

### 2. 启动工具
运行脚本后，会弹出导入工具界面。

### 3. 选择文件
- 点击"选择JSON文件"按钮选择Spine JSON文件
- 点击"选择Atlas文件"按钮选择Atlas文件
- 点击"选择纹理目录"按钮选择包含纹理的目录

### 4. 设置选项
- **缩放比例**: 调整导入对象的整体大小
- **导入动画**: 是否导入动画数据
- **创建预览**: 是否创建预览对象

### 5. 开始导入
点击"开始导入"按钮，工具会自动：
1. 验证所有文件路径
2. 加载纹理
3. 创建骨骼层次结构
4. 创建网格对象
5. 导入动画数据
6. 自动选择并缩放视图

## 主要改进

### 错误处理
- 添加了详细的错误日志
- 支持不同级别的调试信息（INFO, WARNING, ERROR）
- 更好的异常捕获和处理

### 文件验证
- 导入前验证所有文件路径
- 检查文件是否存在和可访问
- 提供详细的错误信息

### 调试功能
- 详细的进度信息
- 成功/失败统计
- 可追踪的错误信息

### UI改进
- 更清晰的界面布局
- 添加帮助按钮
- 更好的状态反馈
- 进度条显示

## 常见问题

### Q: 导入后看不到对象？
A: 检查缩放比例设置，可能需要调整缩放值。

### Q: 动画不播放？
A: 确保选择了"导入动画"选项，导入后手动播放测试。

### Q: 纹理显示不正确？
A: 确保纹理文件路径正确，所有PNG文件都在指定目录中。

### Q: 骨骼层次结构错误？
A: 检查JSON文件中的父子关系数据是否正确。

## 技术细节

### 数据结构
工具处理以下Spine数据结构：
- `bones`: 骨骼定义和层次结构
- `slots`: 槽位和附件信息
- `animations`: 动画关键帧数据

### 坐标系统
- Spine使用Y轴向上的坐标系
- 3ds Max使用Y轴向前的坐标系
- 工具自动处理坐标转换

### 动画处理
- 时间单位：秒转换为帧（30fps）
- 位置动画：X/Y坐标转换
- 旋转动画：弧度转换为角度

## 版本历史

### v2.0 (当前版本)
- 改进的错误处理和调试功能
- 更好的文件验证
- 详细的进度反馈
- 改进的UI设计

### v1.0 (原始版本)
- 基础导入功能
- 简单的错误处理
- 基本UI界面

## 技术支持

如果遇到问题，请检查：
1. 文件路径是否正确
2. 文件格式是否兼容
3. 3ds Max版本是否支持
4. Python环境是否正确配置

## 许可证

此工具为开源项目，可自由使用和修改。