# Spine动画导入工具 v2.0

这是一个用于3ds Max的Spine动画导入工具，可以将Spine导出的JSON和Atlas文件导入到3ds Max中，支持骨骼、纹理和动画数据。

## 功能特性

### 🎯 核心功能
- **骨骼系统**: 自动创建骨骼层次结构，支持父子关系
- **纹理材质**: 从Atlas文件加载纹理并应用到网格对象
- **动画导入**: 支持位置和旋转动画的关键帧导入
- **中文界面**: 完整的中文用户界面和提示信息

### 🛠️ 技术特性
- **错误处理**: 全面的错误处理和调试信息
- **文件验证**: 自动验证输入文件的完整性
- **进度显示**: 实时显示导入进度和状态
- **调试模式**: 详细的日志输出，便于问题排查

## 系统要求

- **3ds Max**: 2018或更高版本
- **Python**: 3.6或更高版本
- **pymxs**: 3ds Max的Python接口
- **Spine**: 导出的JSON和Atlas文件

## 安装方法

1. **下载脚本**: 将`spine_importer.py`文件复制到3ds Max的脚本目录
2. **启动3ds Max**: 打开3ds Max软件
3. **运行脚本**: 在3ds Max中执行以下命令：
   ```python
   execfile("path/to/spine_importer.py")
   ```

## 使用方法

### 1. 准备文件
确保你有以下Spine导出文件：
- **JSON文件**: 包含骨骼、槽位和动画数据
- **Atlas文件**: 包含纹理信息和UV坐标
- **纹理目录**: 包含所有PNG纹理图片

### 2. 启动工具
运行脚本后，会弹出导入工具的界面窗口。

### 3. 选择文件
- 点击"选择JSON文件"按钮，选择Spine导出的JSON文件
- 点击"选择Atlas文件"按钮，选择对应的Atlas文件
- 点击"选择纹理目录"按钮，选择包含纹理图片的目录

### 4. 设置选项
- **缩放比例**: 调整导入对象的整体大小
- **导入动画**: 是否导入动画数据
- **创建预览**: 是否创建预览对象
- **详细日志**: 是否显示详细的调试信息

### 5. 开始导入
点击"开始导入"按钮，工具会自动：
1. 验证所有输入文件
2. 加载纹理和材质
3. 创建骨骼系统
4. 生成网格对象
5. 导入动画数据
6. 设置视图缩放

## 文件格式说明

### JSON文件结构
```json
{
  "bones": [
    {
      "name": "骨骼名称",
      "x": 0,
      "y": 0,
      "length": 1.0,
      "rotation": 0,
      "parent": "父骨骼名称"
    }
  ],
  "slots": [
    {
      "name": "槽位名称",
      "bone": "骨骼名称",
      "attachment": {
        "name": "纹理名称.png",
        "width": 100,
        "height": 100
      }
    }
  ],
  "animations": {
    "动画名称": {
      "bones": {
        "骨骼名称": {
          "translate": [
            {"time": 0, "x": 0, "y": 0}
          ],
          "rotate": [
            {"time": 0, "angle": 0}
          ]
        }
      }
    }
  }
}
```

### Atlas文件格式
```
纹理名称.png
  rotate: false
  xy: 0, 0
  size: 100, 100
  orig: 100, 100
  offset: 0, 0
  index: -1
```

## 常见问题

### Q: 导入后看不到对象？
A: 检查以下几点：
- 确保所有文件路径正确
- 检查缩放比例是否合适
- 尝试点击"重置场景"后重新导入

### Q: 动画不播放？
A: 可能的解决方案：
- 确保JSON文件包含动画数据
- 检查时间线设置
- 手动播放动画测试

### Q: 纹理显示不正确？
A: 检查以下内容：
- Atlas文件路径是否正确
- 纹理图片是否存在于指定目录
- 文件编码是否为UTF-8

### Q: 骨骼层次结构错误？
A: 检查JSON文件中的父子关系数据是否正确。

## 调试技巧

1. **启用详细日志**: 在界面中勾选"详细日志"选项
2. **查看监听器**: 在3ds Max中打开监听器窗口查看详细输出
3. **分步测试**: 可以分别测试纹理加载、骨骼创建和动画导入

## 版本历史

### v2.0 (当前版本)
- 改进的错误处理和中文提示
- 更详细的调试信息
- 优化的UI界面
- 更好的文件验证

### v1.0
- 基础导入功能
- 简单的用户界面
- 基本的错误处理

## 技术支持

如果遇到问题，请检查：
1. 3ds Max版本兼容性
2. Python环境配置
3. 文件格式是否正确
4. 路径中是否包含特殊字符

## 许可证

本工具为开源项目，遵循MIT许可证。

---

**注意**: 使用前请备份你的3ds Max场景文件，以防意外情况发生。